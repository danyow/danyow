<!doctype html>
<html lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="4ğŸŒ€4 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="4ğŸŒ€4 Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="4ğŸŒ€4" href="/opensearch.xml"><title data-react-helmet="true">Rust | 4ğŸŒ€4</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://danyow.cn/blog/2019/rust"><meta data-react-helmet="true" name="docsearch:language" content="zh"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Rust | 4ğŸŒ€4"><meta data-react-helmet="true" name="description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust"><meta data-react-helmet="true" property="og:description" content="Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ Rust"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2019-12-04T14:39:06.000Z"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://danyow.cn/blog/2019/rust"><link data-react-helmet="true" rel="alternate" href="https://danyow.cn/blog/2019/rust" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://danyow.cn/en/blog/2019/rust" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://danyow.cn/blog/2019/rust" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://S3KRFC060Q-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.d771cc61.css">
<link rel="preload" href="/assets/js/runtime~main.667cce3b.js" as="script">
<link rel="preload" href="/assets/js/main.b2a8f5b1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="4ğŸŒ€4 logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/logo.svg" alt="4ğŸŒ€4 logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">4ğŸŒ€4</b></a><a class="navbar__item navbar__link" href="/docs/greeting">ç¬”è®°</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">åšå®¢</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" href="/tutorial/intro">v1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tutorial/next/intro">v2 ğŸš§</a></li><li><a class="dropdown__link" href="/tutorial/intro">v1</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_EbrZ"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/blog/2019/rust" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">ä¸­æ–‡</a></li><li><a href="/en/blog/2019/rust" target="_self" rel="noopener noreferrer" class="dropdown__link">English</a></li></ul></div><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ğŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ğŸŒ</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_fBfG"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_q+wC thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_9G5K margin-bottom--md">Recent posts</div><ul class="sidebarItemList_6T4b"><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2020/clash">Clashçš„ä½¿ç”¨</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2019/scoop">Scoopçš„å®‰è£…</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2020/server">éƒ¨ç½²æ–°å®‰è£…çš„centosæœåŠ¡å™¨</a></li><li class="sidebarItem_cjdF"><a aria-current="page" class="sidebarItemLink_zyXk sidebarItemLinkActive_wcJs" href="/blog/2019/rust">Rust</a></li><li class="sidebarItem_cjdF"><a class="sidebarItemLink_zyXk" href="/blog/2019/mac">macä¸Šå¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_d4p0" itemprop="headline">Rust</h1><div class="blogPostData_-Im+ margin-vert--md"><time datetime="2019-12-04T14:39:06.000Z" itemprop="datePublished">2019å¹´12æœˆ4æ—¥</time> Â· <!-- -->One min read</div></header><div class="markdown" itemprop="articleBody"><p>Title: Mac ä¸‹å­¦ä¹ ä½¿ç”¨ <em>Rust</em></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å®‰è£…">å®‰è£…<a class="hash-link" href="#å®‰è£…" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="brew-å®‰è£…">brew å®‰è£…<a class="hash-link" href="#brew-å®‰è£…" title="Direct link to heading">â€‹</a></h3><p>æµ‹è¯•ä¹‹å, ç¯å¢ƒæœ‰å¾ˆå¤šå†…å®¹æœ‰æ²¡å®‰è£…ä¸Š, ä¼°è®¡ä¹Ÿæ˜¯æ²¡æœ‰é…ç½®ç¯å¢ƒçš„åŸå› </p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å®˜ç½‘æ–¹æ³•">å®˜ç½‘æ–¹æ³•<a class="hash-link" href="#å®˜ç½‘æ–¹æ³•" title="Direct link to heading">â€‹</a></h3><ol><li><p><code>curl --proto &#x27;=https&#x27; --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></p></li><li><p>å¯¼å…¥ç¯å¢ƒå‚æ•° <code>export PATH=&quot;$PATH:$HOME/.cargo/bin&quot;</code></p></li><li><p><code>rustc --version</code></p></li></ol><h2 class="anchor anchorWithStickyNavbar_y2LR" id="å…¥é—¨">å…¥é—¨<a class="hash-link" href="#å…¥é—¨" title="Direct link to heading">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="rustc-ç¼–è¯‘">rustc ç¼–è¯‘<a class="hash-link" href="#rustc-ç¼–è¯‘" title="Direct link to heading">â€‹</a></h3><p>éšä¾¿å†™ä¸€ä¸ª <code>main.rs</code> æ–‡ä»¶, ç„¶åé”®å…¥ä¸‹è¿°å†…å®¹.</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Hello, world!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç„¶åæ‰§è¡Œ<code>rustc main.rs</code>å¾—åˆ°ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶<code>./main</code>å³å¯çœ‹åˆ°æ‰“å°</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cargo">Cargo<a class="hash-link" href="#cargo" title="Direct link to heading">â€‹</a></h3><p>å¦‚æœå®‰è£…çš„æ—¶å€™ç”¨çš„æ˜¯å®˜ç½‘çš„æ–¹æ³•çš„è¯, æ˜¯ä¼šè®©ä½ é€‰æ‹©ç¬¬å‡ ä¸ªå®‰è£…æ–¹å¼, æˆ‘ä»¬é€šå¸¸é€‰æ‹©ç¬¬ä¸€ä¸ªé‡‡ç”¨é»˜è®¤çš„æ–¹å¼, è¿™æ ·å°±ä¼šæŠŠCargoæ‰€éœ€è¦çš„ä¹Ÿå°±ä¸€èµ·ä¸‹è½½å®‰è£…ä¸‹æ¥äº†. åœ¨åˆ°æˆ‘ä»¬é…ç½®ç¯å¢ƒè¾“å…¥çš„<code>PATH</code>ä¹Ÿæ˜¯ä¸€æ ·</p><ol><li><p>æ–°å»ºé¡¹ç›®
<code>cargo new hello_cargo</code></p></li><li><p>ç¼–è¯‘é¡¹ç›®
<code>cargo build</code> or <code>cargo build --release</code></p></li><li><p>è¿è¡Œé¡¹ç›®
<code>cargo run</code></p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ç¼–å†™çŒœè°œæ¸¸æˆ">ç¼–å†™çŒœè°œæ¸¸æˆ<a class="hash-link" href="#ç¼–å†™çŒœè°œæ¸¸æˆ" title="Direct link to heading">â€‹</a></h3><ol><li><p>ç›´æ¥ç¼–å†™</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;    // ä½¿ç”¨æ ‡å‡†åº“çš„io</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Guess the number!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Please input your guess.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut guess = String::new(); // å®šä¹‰ä¸€ä¸ªå¯å˜çš„å˜é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    io::stdin().read_line(&amp;mut guess)   // æ¢è¡Œçš„åŸå› åªæ˜¯å› ä¸ºè¿‡é•¿äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expect(&quot;Failed to read line&quot;); // å¤„ç†å¯èƒ½çš„æŠ¥é”™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;You guessed: {}&quot;, guess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>åŠ å…¥<code>rand</code>åº“</p><p>åœ¨<code>Cargo.toml</code>æ–‡ä»¶ä¸­åŠ å…¥</p><div class="codeBlockContainer_J+bg language-toml theme-code-block"><div class="codeBlockContent_csEI toml"><pre tabindex="0" class="prism-code language-toml codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">[dependencies]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rand = &quot;0.3.14&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ç„¶åç¼–è¯‘<code>cargo build</code>æˆ–è€…æ˜¯<code>cargo run</code>å¯èƒ½ä¼šé‡åˆ°
<code>Blocking waiting for file lock on package cache</code>
å¦‚æœæ‰§è¡Œå¾—æ˜¯<code>cargo update</code>å°±ä¸ä¼šé‡åˆ°<code>Cargo.lock</code>æ–‡ä»¶äº†</p><p>è¿™é‡ŒæŒ‡å®šäº†<code>0.3.14</code>ç‰ˆæœ¬å¹¶ä¸æ˜¯çœŸçš„å°±åªä½¿ç”¨è¯¥ç‰ˆæœ¬, è€Œæ˜¯ä¼šä½¿ç”¨å…¼å®¹è¯¥ç‰ˆæœ¬çš„æ›´é«˜ç‰ˆæœ¬</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use rand::Rng;  // å¯¼å…¥ éšæœºåº“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Guess the number!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let secret_number = rand::thread_rng().gen_range(1, 101);   // ç”Ÿæˆä¸€ä¸ª 0 ~ 100 çš„éšæœºæ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;The secret number is: {}&quot;, secret_number);    // æµ‹è¯•æ‰“å°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Please input your guess.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut guess = String::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    io::stdin().read_line(&amp;mut guess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expect(&quot;Failed to read line&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // trim çš„æ˜¯å°±æ˜¯åˆ é™¤æŸäº›ä¸œè¥¿ ç”±äº é”®å…¥çš„æ—¶å€™æœ€åé¢ä¼šæ•²å‡»å›è½¦ å¯¼è‡´\nä¼šåŠ å…¥è¿›æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let guess: u32 = guess.trim().parse()   // ç”¨ åŒä¸€ä¸ªå˜é‡å å»è¦†ç›– guess å¹¶è½¬æˆ u32ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .expect(&quot;Please type a number!&quot;);   // è½¬æ¢ç±»å‹ä¹Ÿæ˜¯æœ‰å¯èƒ½æŠ¥é”™çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;You guessed: {}&quot;, guess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match guess.cmp(&amp;secret_number) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ordering::Less =&gt; println!(&quot;Too small!&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ordering::Greater =&gt; println!(&quot;Too big!&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ordering::Equal =&gt; println!(&quot;You win!&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>åŠ å…¥å¾ªç¯</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;The secret number is: {}&quot;, secret_number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    loop {  // åŠ å…¥å¾ªç¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println!(&quot;Please input your guess.&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match guess.cmp(&amp;secret_number) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ordering::Less =&gt; println!(&quot;Too small!&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ordering::Greater =&gt; println!(&quot;Too big!&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ordering::Equal =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                println!(&quot;You win!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                break;  // åœ¨è¿™é‡Œé€€å‡ºå¾ªç¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¤„ç†éæ•°å­—çš„è¾“å…¥</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">io::stdin().read_line(&amp;mut guess)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .expect(&quot;Failed to read line&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åŠ å…¥matchæ¥å¯¹æŠ¥é”™çš„ continueæ¥å¤„ç†éæ•°å­—çš„è¾“å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let guess: u32 = match guess.trim().parse() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(num) =&gt; num,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Err(_) =&gt; continue,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;You guessed: {}&quot;, guess);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// --snip--</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="é€šç”¨ç¼–ç¨‹æ¦‚å¿µ">é€šç”¨ç¼–ç¨‹æ¦‚å¿µ<a class="hash-link" href="#é€šç”¨ç¼–ç¨‹æ¦‚å¿µ" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å˜é‡å’Œå¯å˜æ€§">å˜é‡å’Œå¯å˜æ€§<a class="hash-link" href="#å˜é‡å’Œå¯å˜æ€§" title="Direct link to heading">â€‹</a></h4><ol><li>è¿™é‡Œçš„å˜é‡ä¸æ˜¯æŒ‡èƒ½å˜çš„é‡, è€Œæ˜¯ä¸€ä¸ªå®šä¹‰, ä½†åªè¦èµ‹äºˆäº† <code>mut</code> æ‰æ˜¯çœŸçš„å¯ä»¥å˜</li><li>å¸¸é‡çš„å‘½åè§„åˆ™ å•è¯å…¨å¤§å†™ ä¸‹åˆ’çº¿åˆ†éš” å°±è¿int <code>100,000</code> éƒ½å¯ä»¥è¡¨ç¤ºä¸º <code>100_000</code></li><li>å˜é‡å¯ä»¥è¢«é‡å¤å£°æ˜å¹¶è¦†ç›–åŸå€¼ ä½†ä¸èƒ½æ”¹å˜åŸæœ‰æ•°æ®ç±»å‹ ä¹Ÿå°±æ˜¯ä¸èƒ½ string =&gt; int</li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="èµ„æ–™ç±»å‹">èµ„æ–™ç±»å‹<a class="hash-link" href="#èµ„æ–™ç±»å‹" title="Direct link to heading">â€‹</a></h4><ol><li><p>ç¼–è¯‘æ—¶éœ€è¦å¸®å¿™ç¡®å®šç±»å‹</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let guess: u32 = &quot;42&quot;.parse().expect(&quot;Not a number!&quot;);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ•´å‹çš„è¡¨ç¤ºå½¢å¼æœ‰</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å°æ•°        98_222</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    åå…­        0xff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å…«è¿›        0o77</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    äºŒå…ƒ        0b1111_0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    å­—èŠ‚ï¼ˆu8ä»…ï¼‰ b&#x27;A&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>boolç±»å‹å°±åªæœ‰çœŸå‡ ä¸ä¼šé»˜è®¤å¸®å¿™è½¬æ¢</p></li><li><p>å…ƒç»„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let x: (i32, f64, u8) = (500, 6.4, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let five_hundred = x.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let six_point_four = x.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let one = x.2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ•°ç»„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let c: [i32; 5] = [1, 2, 3, 4, 5];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let b = [3; 5];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let a = [1, 2, 3, 4, 5];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let first = a[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let second = a[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å‡½æ•°">å‡½æ•°<a class="hash-link" href="#å‡½æ•°" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä¸å¸¦;è¡¨ç¤ºè¿”å›å€¼</p></li><li><p>æŒ‡å®šè¿”å›å€¼</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn plus_one(x: i32) -&gt; i32 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x + 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ³¨é‡Š">æ³¨é‡Š<a class="hash-link" href="#æ³¨é‡Š" title="Direct link to heading">â€‹</a></h4><p>è®²è§£Crates.ioçš„æ—¶å€™æ‰è¯´</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ§åˆ¶æµ">æ§åˆ¶æµ<a class="hash-link" href="#æ§åˆ¶æµ" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä½¿ç”¨<code>if</code>çš„<code>let</code>è¯­å¥</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"> fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     let condition = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     let number = if condition {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     println!(&quot;The value of number is: {}&quot;, number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä»å¾ªç¯é‡Œé¢è¿”å›å€¼å‡ºæ¥</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut counter = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let result = loop {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        counter += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if counter == 10 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            break counter * 2;// æˆ‘åœ¨æƒ³ è¿™é‡Œæ²¡æœ‰; ä¸ºä»€ä¹ˆä¹Ÿèƒ½æœ‰å€¼è¿”å›å‡ºå»å‘¢?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;The result is {}&quot;, result);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>éå†</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let a = [10, 20, 30, 40, 50];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ–¹æ³•1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for element in a.iter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println!(&quot;the value is: {}&quot;, element);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ–¹æ³•2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for number in (1..4).rev() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println!(&quot;{}!&quot;, number);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ–¹æ³•3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while index &lt; 5 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        println!(&quot;the value is: {}&quot;, a[index]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        index += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ‰€æœ‰æƒ">æ‰€æœ‰æƒ<a class="hash-link" href="#æ‰€æœ‰æƒ" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ">ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ" title="Direct link to heading">â€‹</a></h4><ol><li><p>æ¯ä¸ªå†…å­˜åªèƒ½è¢«æ‰€æœ‰ä¸€æ¬¡, ä¸€æ—¦è¢«æ¥ç®¡äº†å°±æ²¡äº†.</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸‹è¿°ä»£ç å°±ä¼šæŠ¥é”™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s1 = String::from(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s2 = s1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{}, world!&quot;, s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error[E0382]: use of moved value: `s1`</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --&gt; src/main.rs:5:28</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3 |     let s2 = s1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |         -- value moved here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    4 |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    5 |     println!(&quot;{}, world!&quot;, s1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |                            ^^ value used here after move</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    = note: move occurs because `s1` has type `std::string::String`, which does</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    not implement the `Copy` trait</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¦‚æœæƒ³è¦æ‹¿åˆ°ä¸€æ ·çš„å†…å®¹çš„è¯ ä½¿ç”¨ <code>clone</code></p></li><li><p>å¯¹åŸºç¡€æ•°æ®ç±»å‹æ“ä½œçš„æ˜¯ ä¼šè‡ªåŠ¨è°ƒç”¨ <code>copy</code>, ç”±äºéƒ½æ˜¯åœ¨æ ˆåŒº, ä¸ä¼šäº§ç”Ÿæ–°çš„å†…å­˜ç©ºé—´</p></li><li><p>å¦‚æœç›´æ¥æŠŠæŸä¸ªå˜é‡äº¤ä»˜ç»™æŸä¸ªå‡½æ•°, è€Œè¯¥å‡½æ•°æ²¡æœ‰ç§»äº¤æ‰€æœ‰æƒå‡ºæ¥çš„è¯, ä»–å°†ä¸èƒ½å†è¢«ä½¿ç”¨äº†</p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å¼•ç”¨å’Œå€Ÿé˜…">å¼•ç”¨å’Œå€Ÿé˜…<a class="hash-link" href="#å¼•ç”¨å’Œå€Ÿé˜…" title="Direct link to heading">â€‹</a></h3><ol><li><p><code>&amp;</code> è¡¨ç¤ºå¼•ç”¨è¯¥å‚æ•°, ä½†ä¸èƒ½è¿›è¡Œå˜æ›´, å¦‚æœè¦å˜æ›´çš„è¯ éœ€è¦ <code>&amp;mut</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut s = String::from(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    change(&amp;mut s);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn change(some_string: &amp;mut String) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    some_string.push_str(&quot;, world&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä¸èƒ½æœ‰ä¸¤æ¬¡å¯å˜å¼•ç”¨, å› ä¸ºä¸çŸ¥é“ä¾æ®è°çš„æ”¹å˜</p></li><li><p>åŒä¸Š, å¦‚æœè¿˜å­˜åœ¨å¤šä¸ªåç»­ä¾æ—§ä¼šä½¿ç”¨çš„ä¸å¯å˜å¼•ç”¨æ—¶å€™, ä¸èƒ½åˆ›å»ºå¯å˜å¼•ç”¨, å› ä¸ºä¸å¯å˜çš„å¼•ç”¨æ˜¯ä¸çŸ¥é“å¯å˜å¼•ç”¨çš„å­˜åœ¨çš„, ä½†å¦‚æœåœ¨ä½¿ç”¨åå¹¶ä¸”åç»­ä¸å†ä½¿ç”¨äº†ä¹‹å, å°±å…è®¸åˆ›å»ºå¯å˜å¼•ç”¨äº†</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let mut s = String::from(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let r1 = &amp;s; // no problem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let r2 = &amp;s; // no problem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{} and {}&quot;, r1, r2);  // è¿™é‡Œä½¿ç”¨ä¹‹å åç»­å°±ä¸å†ä½¿ç”¨äº† è¯´æ˜æ˜¯å¯ä»¥çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// r1 and r2 are no longer used after this point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let r3 = &amp;mut s; // no problem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{}&quot;, r3);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ‚¬ç©º, ä»€ä¹ˆæ„æ€å‘¢, å¯ä»¥ç†è§£ä¸ºåƒµå°¸æŒ‡é’ˆ</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain"> fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let reference_to_nothing = dangle();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn dangle() -&gt; &amp;String {    // è¿™é‡Œå°†è¿”å›ä¸€ä¸ªå¸¦æœ‰å¼•ç”¨çš„æ•°æ®ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let s = String::from(&quot;hello&quot;);  // ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹, å¼€è¾Ÿå¯ä»¥ä¸€ä¸ªæ–°çš„å†…å­˜ç©ºé—´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;s  // ç§»äº¤å¼•ç”¨å‡ºå» ä»£è¡¨æ˜¯ æˆ‘åªæ˜¯å€Ÿä½ æ‹¿å»ç”¨çš„æ„æ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   // ä½†è¿™é‡Œå°±å·²ç»è¢«é‡Šæ”¾äº† äº§ç”Ÿ åƒµå°¸æŒ‡é’ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn no_dangle() -&gt; String {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let s = String::from(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s   // è¿™é‡Œæ˜¯æŠŠæ‰€æœ‰æƒç»™å‡ºå»äº† ä»£è¡¨æ˜¯ æˆ‘å¼€è¾Ÿçš„ç©ºé—´ æˆ‘ä¸è¦äº† ä½ æ‹¿å»ç”¨å§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}   // è¿™æ ·ç»™å‡ºå»çš„å†…å­˜å°±ä¸ä¼šè¢«é‡Šæ”¾äº†</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="åˆ‡ç‰‡ç±»å‹">åˆ‡ç‰‡ç±»å‹<a class="hash-link" href="#åˆ‡ç‰‡ç±»å‹" title="Direct link to heading">â€‹</a></h4><ol><li><p>å…ˆçœ‹ä¸€ä¸ªè·å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// å€Ÿé˜…ä¸€ä¸ªå­—ç¬¦ä¸²   è¿”å›å•è¯çš„ä¸‹æ ‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn first_word(s: &amp;String) -&gt; usize {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è½¬æ¢ä¸ºæ•°ç»„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let bytes = s.as_bytes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // éå† bytes.iter() å¹¶ä¸”åˆ›å»ºè¿­ä»£å™¨ enumerate() å¯ä»¥ç†è§£ä¸º enumerate() ä¼šäº§ç”Ÿå‡ºä¸€ä¸ªå…ƒç»„æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i, &amp;item) in bytes.iter().enumerate() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //  å€Ÿé˜…åˆ°äº† item</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if item == b&#x27; &#x27; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return i;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s.len() // ä¹ä¸€çœ‹æ²¡æœ‰é—®é¢˜ ä½†, å…¶å®è¿™é‡Œæ¶‰åŠåˆ°äº†å¾ˆå¤šé—®é¢˜, æ¯”æ–¹å•è¯é•¿åº¦æœªçŸ¥å’Œ s è¢«é”€æ¯äº† è¿™ç»„æ•°æ®å°±å¤±æ•ˆäº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¼•å…¥åˆ‡ç‰‡</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let s = String::from(&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let len = s.len();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[0..2];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[..2];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[3..len];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[3..];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[0..len];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;s[..];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><code>&amp;str</code> è¡¨ç¤ºçš„æ˜¯åˆ‡ç‰‡ç±»å‹ <code>&amp;String</code> è¡¨ç¤ºçš„å­—ç¬¦ä¸²ç±»å‹</p></li><li><p>æœ‰äº†åˆ‡ç‰‡è¿™ä¸ªæ¦‚å¿µä¹‹åå°±å¯ä»¥æ”¹å†™å–ç¬¬ä¸€ä¸ªå•è¯çš„å‡½æ•°äº†</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn first_word(s: &amp;String) -&gt; &amp;str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let bytes = s.as_bytes();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for (i, &amp;item) in bytes.iter().enumerate() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if item == b&#x27; &#x27; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return &amp;s[0..i];    // ç›´æ¥è¿”å›åˆ‡ç‰‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åˆšå¥½è¿™é‡Œçš„ s æ˜¯å€Ÿæ¥çš„ æ‰€ä»¥ç›´æ¥æ‹¿ç€è¿™ç©æ„ è½¬å€Ÿç»™åˆ«äººå°±è¡Œäº† æ²¡æˆ‘å•¥äº‹äº†çš„æ„æ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &amp;s[..]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä½¿ç”¨ä¸Šè¿°ä»£ç </p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut s = String::from(&quot;hello world&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let word = first_word(&amp;s); // è¿™ä¸ªåˆ‡ç‰‡è¿˜æ˜¯ç”¨çš„ s çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    s.clear(); // è¿™é‡Œå°±ä¼šç›´æ¥æŠ¥é”™äº† å› ä¸ºä¼šè·å–sçš„å¯å˜å¼•ç”¨å¹¶ä¸”æŠŠå®ƒæ¸…ç©º, è€Œ worldæ˜¯ first_word å€Ÿäº†såˆè½¬æ‰‹ç»™äº†wordçš„ä¸€ä¸ªä¸å¯å˜å¼•ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;the first word is: {}&quot;, word);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æŠŠä¼ å…¥çš„ <code>&amp;String</code> ç±»å‹å˜æˆ <code>&amp;str</code> ç±»å‹ å°±å¯ä»¥æ¥å— åˆ‡ç‰‡å’Œå­—ç¬¦ä¸²äº† å› ä¸ºå­—ç¬¦ä¸²å°±æ˜¯å…¨åˆ‡ç‰‡</p></li><li><p>å…¶ä»–çš„åˆ‡ç‰‡</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    let a = [1, 2, 3, 4, 5];    // ä»–çš„ç±»å‹æ˜¯   [i32; 5]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let slice = &amp;a[1..3];       // åˆ‡ç‰‡çš„ç±»å‹æ˜¯ &amp;[i32]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®">ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®<a class="hash-link" href="#ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„">å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„<a class="hash-link" href="#å®šä¹‰å’Œå®ä¾‹åŒ–ç»“æ„" title="Direct link to heading">â€‹</a></h4><ol><li><p>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">struct User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    username: String,   // ç°åœ¨å…ˆä¸å£°æ˜ä¸º &amp;str åˆ‡ç‰‡ç±»å‹ ä¼šæ¶‰åŠåˆ°ç”Ÿå‘½å‘¨æœŸ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sign_in_count: u64,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    active: bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn build_user(email: String, username: String) -&gt; User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email: email,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        active: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sign_in_count: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç®€åŒ–å†™æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn build_user(email: String, username: String) -&gt; User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        active: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sign_in_count: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut user1 = User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email: String::from(&quot;someone@example.com&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: String::from(&quot;someusername123&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        active: true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sign_in_count: 1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç‚¹è¯­æ³•ç›´æ¥æ›´æ”¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    user1.email = String::from(&quot;anotheremail@example.com&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ–°å»ºuser2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let user2 = User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email: String::from(&quot;another@example.com&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: String::from(&quot;anotherusername567&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        active: user1.active,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sign_in_count: user1.sign_in_count,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä½†å¯ä»¥å†™æˆè¿™æ ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let user2 = User {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        email: String::from(&quot;another@example.com&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: String::from(&quot;anotherusername567&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ..user1 // å…¶ä»–å­—æ®µæ²¿ç”¨è¯¥å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å…ƒç»„ç»“æ„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">struct Color(i32, i32, i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Point(i32, i32, i32);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let black = Color(0, 0, 0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let origin = Point(0, 0, 0);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ‰“å°ç»“æ„ é¦–å…ˆæ·»åŠ  <code>#[derive(Debug)]</code> å’Œ ç„¶åæ”¹ <code>{}</code> ä¸º <code>{:?}</code> æˆ– <code>{:#?}</code> å¤šè¡Œæ‰“å°
å•è¡Œæ‰“å° : è¡¨ç¤ºæ‰“å°å‡ºæ¥çš„é”®å€¼ä¸­é—´çš„ : ? è¡¨ç¤ºçš„æ˜¯ å€¼ # è¡¨ç¤ºç«‹èµ·æ¥ å˜æˆå¤šè¡Œ å½¢å¼ä¸»ä¹‰.. ä¸ªäººç†è§£</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn test_rect() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let rect1 = Rectangle { width: 30, height: 50 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;rect1 is {:?}&quot;, rect1);   // è¡¨ç¤ºçš„æ„æ€æ˜¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;rect1 is {:#?}&quot;, rect1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ–¹å—è¯­æ³•">æ–¹å—è¯­æ³•<a class="hash-link" href="#æ–¹å—è¯­æ³•" title="Direct link to heading">â€‹</a></h4><ol><li><p>å®ç°ä¸€ä¸ªæ–¹æ³•</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç° å¯ä»¥æœ‰å¤šä¸ªå®ç°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿™é‡Œçš„selféƒ½åªæ˜¯å€Ÿæ¥çš„ åªåšè®¿é—®å˜é‡ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä½†å¦‚æœè¦ç”¨æ¥ä¿®æ”¹å…¶å†…å®¹çš„è¯ ä¹Ÿæ˜¯éœ€è¦åŠ ä¸Šmut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn area(&amp;self) -&gt; u32 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.width * self.height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¯ä»¥ç†è§£ä¸ºå®šä¹‰äº†ä¸€ä¸ª ç±»å‡½æ•° åªèƒ½é€šè¿‡ç±»æ¥è°ƒç”¨ è°ƒç”¨æ–¹å¼ é‡‡ç”¨ :: åŒå†’å·å½¢å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn square(size: u32) -&gt; Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Rectangle { width: size, height: size }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let rect1 = Rectangle { width: 30, height: 50 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;The area of the rectangle is {} square pixels.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rect1.area()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let sq = Rectangle::square(3)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>è‡ªåŠ¨ä¿®æ”¹è°ƒç”¨çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹, ä»…ä»…é’ˆå¯¹ <code>self</code> å‚æ•°   ä¼šè‡ªåŠ¨æ·»åŠ ä»–çš„å˜ä½“ <code>&amp;</code>ï¼Œ<code>&amp;mut</code> æˆ– <code>*</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#![allow(unused_variables)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #[derive(Debug,Copy,Clone)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Point {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        x: f64,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        y: f64,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    impl Point {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn distance(&amp;self, other: &amp;Point) -&gt; f64 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            let x_squared = f64::powi(other.x - self.x, 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            let y_squared = f64::powi(other.y - self.y, 2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            f64::sqrt(x_squared + y_squared)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let p1 = Point { x: 0.0, y: 0.0 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let p2 = Point { x: 5.0, y: 6.5 };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿™ä¸¤ä¸ªæ–¹æ³•çš„è°ƒç”¨æ—¶ä¸€æ— æ‰€è°“çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    p1.distance(&amp;p2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (&amp;p1).distance(&amp;p2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æšä¸¾">æšä¸¾<a class="hash-link" href="#æšä¸¾" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä¸å¾—ä¸æ‰¿è®¤ è¿™ä¹ˆæ²¡æœ‰å¾ˆå¸å¼•æˆ‘</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// æ­£å¸¸ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum IpAddrKind {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V4,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V6,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ··ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum IpAddr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V4(u8, u8, u8, u8),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V6(String),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Ipv4Addr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Ipv6Addr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç»“æ„ä½“ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum IpAddr {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V4(Ipv4Addr),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    V6(Ipv6Addr),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¼ºå¤§æ‰€åœ¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum Message {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Quit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Move { x: i32, y: i32 },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Write(String),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ChangeColor(i32, i32, i32),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Message {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿˜èƒ½...å®ç° å‡½æ•°!!!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn call(&amp;self) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // method body would be defined here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>Option
nullçš„å‘æ˜è€…Tony Hoareåœ¨2009å¹´çš„æ¼”è®²â€œ Null Referencesï¼šåäº¿ç¾å…ƒçš„é”™è¯¯â€ä¸­è¯´ï¼š</p><div class="codeBlockContainer_J+bg language-text theme-code-block"><div class="codeBlockContent_csEI text"><pre tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    æˆ‘ç§°ä¹‹ä¸ºæˆ‘çš„åäº¿ç¾å…ƒé”™è¯¯ã€‚å½“æ—¶ï¼Œæˆ‘æ­£åœ¨è®¾è®¡ç¬¬ä¸€ä¸ªå…¨é¢çš„ç±»å‹ç³»ç»Ÿï¼Œä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„è¯­è¨€è¿›è¡Œå¼•ç”¨ã€‚æˆ‘çš„ç›®æ ‡æ˜¯ç¡®ä¿æ‰€æœ‰å¼•ç”¨çš„ä½¿ç”¨éƒ½ç»å¯¹å®‰å…¨ï¼Œå¹¶ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥ã€‚ä½†æ˜¯æˆ‘å¿ä¸ä½è¦æ’å…¥ä¸€ä¸ªç©ºå¼•ç”¨çš„è¯±æƒ‘ï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒæ˜¯å¦‚æ­¤å®¹æ˜“å®ç°ã€‚è¿™å¯¼è‡´äº†æ— æ•°é”™è¯¯ï¼Œæ¼æ´å’Œç³»ç»Ÿå´©æºƒï¼Œåœ¨æœ€è¿‘å››åå¹´ä¸­å¯èƒ½é€ æˆåäº¿ç¾å…ƒçš„ç—›è‹¦å’Œç ´åã€‚</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">enum Option&lt;T&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Some(T),    // æ³›å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let some_number = Some(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let some_string = Some(&quot;a string&quot;);     // Some ç›´æ¥èµ‹å€¼å³å¯æ¨æµ‹ç±»å‹äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let absent_number: Option&lt;i32&gt; = None;  // None æ²¡æœ‰ç±»å‹ é‚£ä¹ˆå°±éœ€è¦æŒ‡ä»£ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>åŠ å…¥Option æ—¨åœ¨é™åˆ¶nullçš„æ™®éæ€§å¹¶æé«˜Rustä»£ç çš„å®‰å…¨æ€§ã€‚</p></li><li><p>åŒ¹é…æ§åˆ¶æµ <code>match</code></p><p>ä¸€ä¸ªå¼ºå¤§çš„æ­¦å™¨</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">enum UsState {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Alabama,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Alaska,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum Coin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Penny,      // 1 ç¾åˆ†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Nickel,     // 5 ç¾åˆ†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Dime,       // 10 ç¾åˆ†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Quarter(UsState),    // 25 ç¾åˆ†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn value_in_cents(coin: Coin) -&gt; u8 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match coin {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç±»å‡½æ•°çš„è°ƒç”¨æ–¹å¼ æŒ‡å®š æšä¸¾çš„æ¯ä¸ªå€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Coin::Penny =&gt; {    // =&gt; åŒ¹é…åç›´æ¥èµ‹å€¼çš„æ„æ€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println!(&quot;Lucky penny!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            1   // è¿”å›å€¼ä¸º1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Coin::Nickel =&gt; 5,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Coin::Dime =&gt; 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Coin::Quarter(state) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            println!(&quot;State quarter from {:?}!&quot;, state);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            25</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><code>match</code> æ­é… <code>Option&lt;T&gt;</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn plus_one(x: Option&lt;i32&gt;) -&gt; Option&lt;i32&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    match x {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        None =&gt; None,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Some(i) =&gt; Some(i + 1),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let five = Some(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let six = plus_one(five);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let none = plus_one(None);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><code>_</code> å ä½ç¬¦ ç±»ä¼¼äº <code>default</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let some_u8_value = 0u8; // ç­‰ä»·äº  let some_u8_value : u8 = 1; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">match some_u8_value {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1 =&gt; println!(&quot;one&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3 =&gt; println!(&quot;three&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    5 =&gt; println!(&quot;five&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    7 =&gt; println!(&quot;seven&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ =&gt; (),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å°±ç®—ä½¿ç”¨äº†å ä½ç¬¦ ä½†å¦‚æœæˆ‘ä»¬åªè¦åŒ¹é…ä¸€ç§æ¨¡å¼çš„è¯ ç”¨<code>match</code>æœ‰ç‚¹ç„‰ç”¨ç‰›åˆ€çš„æ„Ÿè§‰äº† æ‰€ä»¥å¼•å…¥äº† <code>if let</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// ç‰›åˆ€æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let some_u8_value = Some(0u8);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">match some_u8_value {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Some(3) =&gt; println!(&quot;three&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ =&gt; (),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç®€çº¦æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if let Some(3) = some_u8_value {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;three&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ¢å¥è¯è¯´ï¼Œæ‚¨å¯ä»¥å°†å…¶<code>if let</code>è§†ä¸º<code>match</code>å½“å€¼åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç„¶åå¿½ç•¥æ‰€æœ‰å…¶ä»–å€¼æ—¶è¿è¡Œä»£ç çš„è¯­æ³•è¯­æ³•ã€‚</p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="ä½¿ç”¨åŒ…å¤´æ–‡ä»¶">ä½¿ç”¨åŒ…(å¤´æ–‡ä»¶)<a class="hash-link" href="#ä½¿ç”¨åŒ…å¤´æ–‡ä»¶" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="åŒ…">åŒ…<a class="hash-link" href="#åŒ…" title="Direct link to heading">â€‹</a></h4><ol><li>åœ¨ä½¿ç”¨<code>cargo</code>çš„æ—¶å€™, ç”Ÿæˆå‡ºæ¥çš„ <code>src</code> å…¶å®å°±æ˜¯ä¸€ä¸ªåŒ…</li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="æ¨¡å—-mod">æ¨¡å— <code>mod</code><a class="hash-link" href="#æ¨¡å—-mod" title="Direct link to heading">â€‹</a></h4><ol><li><p>æ ·æ¿</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mod front_of_house {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¦‚æœè¿™é‡Œä¸æ·»åŠ  pub çš„è¯ æ˜¯æ²¡æœ‰åŠæ³•åœ¨å¤–éƒ¨ä½¿ç”¨çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub mod hosting {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pub fn add_to_waitlist() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn seat_at_table() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mod serving {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn take_order() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn serve_order() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        fn take_payment() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pub fn eat_at_restaurant() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç»å¯¹è·¯å¾„è°ƒç”¨çš„æ—¶å€™ é‡‡ç”¨çš„å…³é”®å­—æ˜¯ crate ç®±å­ å…¶å®å¯ä»¥ç†è§£ä¸ºå½“å‰ç›®å½• root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    crate::front_of_house::hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›¸å¯¹è·¯å¾„è°ƒç”¨çš„æ—¶å€™å¯ä»¥çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    front_of_house::hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li><p>æ¨¡å—æ ‘</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">crate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ front_of_house</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”œâ”€â”€ hosting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â”œâ”€â”€ add_to_waitlist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â”‚   â””â”€â”€ seat_at_table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    â””â”€â”€ serving</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ take_order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ serve_order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ take_payment</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>èµ·å§‹ç›¸å¯¹è·¯å¾„ <code>super</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn serve_order() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mod back_of_house {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn fix_incorrect_order() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cook_order();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // è¿™é‡Œçš„superæ„æ€å°±æ˜¯ back_of_house è€Œä¸” serve_order å’Œ super åŒçº§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        super::serve_order();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn cook_order() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ä½¿ç”¨-use-æ¥å¼•å…¥è·¯å¾„-ç¼©çŸ­è·¯å¾„">ä½¿ç”¨ <code>use</code> æ¥å¼•å…¥è·¯å¾„ ç¼©çŸ­è·¯å¾„<a class="hash-link" href="#ä½¿ç”¨-use-æ¥å¼•å…¥è·¯å¾„-ç¼©çŸ­è·¯å¾„" title="Direct link to heading">â€‹</a></h4><ol><li><p>æ­£å¸¸ä½¿ç”¨</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mod front_of_house {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub mod hosting {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pub fn add_to_waitlist() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use crate::front_of_house::hosting;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn eat_at_restaurant() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç»å¯¹è·¯å¾„ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    crate::front_of_house::hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›¸å¯¹è·¯å¾„ä¸‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    front_of_house::hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¢«ç¼©çŸ­çš„ä½¿ç”¨æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><code>as</code> æ¥é‡å†™å‘½å</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use std::fmt::Result;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use std::io::Result as IoResult;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn function1() -&gt; Result {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ok(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn function2() -&gt; IoResult&lt;()&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // --snip--</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ok(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¯¼å‡º <code>pub use</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">mod front_of_house {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub mod hosting {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pub fn add_to_waitlist() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¤–éƒ¨è®¿é—®å¯ä»¥ç›´æ¥è®¿é—® hosting::add_to_waitlist()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub use crate::front_of_house::hosting;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn eat_at_restaurant() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hosting::add_to_waitlist();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¯¹äºåŒä¸€åŒ…ä¸‹çš„å¤šä¸ªè·¯å¾„ä½¿ç”¨åµŒå¥—å¤„ç† <code>{ , }</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::Write;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::cmp::Ordering;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::{cmp::Ordering, io};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯¹äºè·¯å¾„æœ¬èº« ä½¿ç”¨ self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::{self, Write};</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¯¼å…¥æ‰€æœ‰çš„å…¬å…±é¡¹ç›®</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::collections::*;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ¨¡å— <code>mod</code> åˆ†æ–‡ä»¶å­˜æ”¾</p><p>è¿™ä¸ªä¸éœ€è¦å¤ªå¤šçš„å†…å®¹å»å†™ å¤§æ¦‚å°±æ˜¯å’Œå®‰å“çš„æœºåˆ¶ç±»ä¼¼ æ–‡ä»¶å¤¹å­˜æ”¾å³å¯</p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿">å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿<a class="hash-link" href="#å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="çŸ¢é‡">çŸ¢é‡<a class="hash-link" href="#çŸ¢é‡" title="Direct link to heading">â€‹</a></h4><ol><li><p>çŸ¢é‡ <code>Vec</code> å¯ä»¥å­˜æ”¾ä»»ä½•ç±»å‹, ä½†ä»…é™äºåŒä¸€ç±»å‹çš„, æ‰€ä»¥å¯ä»¥å€ŸåŠ© <code>enum</code> æ¥è¾¾åˆ°æ··å­˜çš„åŠŸèƒ½</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let v: Vec&lt;i32&gt; = Vec::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v.push(5);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v.push(6);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let v = vec![1, 2, 3];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">enum SpreadsheetCell {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Int(i32),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Float(f64),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Text(String),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let row = vec![</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SpreadsheetCell::Int(3),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SpreadsheetCell::Text(String::from(&quot;blue&quot;)),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    SpreadsheetCell::Float(10.12),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">];</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¦‚æœå·²ç»ç”Ÿæˆè¿‡äº†ä¸ª ä¸å¯å˜ çš„å¼•ç”¨ä¹‹å, å†ç»§ç»­å¯¹å…¶push</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let mut v = vec![1, 2, 3, 4, 5];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let first = &amp;v[0];  // äº§ç”Ÿä¸å¯å˜çš„å¼•ç”¨ä¹‹å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v.push(6);          // è¿™é‡Œä¼šç”Ÿæˆ å¯å˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;The first element is: {}&quot;, first);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å¯ä»¥ç›´æ¥å¯¹å…¶éå†</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let v = vec![100, 32, 57];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for i in &amp;v {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;{}&quot;, i);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¦‚æœè¦æ”¹å€¼å¾—è¯ éœ€è¦åŠ  mut</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for i in &amp;mut v {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç”šè‡³æ˜¯ç›´æ¥éå†çš„æ—¶å€™æ›´æ”¹ä»–çš„å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *i += 50; // * æœ‰ç‚¹å¼ºä¹°å¼ºå–çš„é—®é“</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="string">String<a class="hash-link" href="#string" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä¸èƒ½å¯¹ <code>String</code> ç´¢å¼•</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let hello = &quot;Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let answer = &amp;hello[0]; // å› ä¸ºUnicodeå—çš„å­—èŠ‚é•¿åº¦æ˜¯ä¸å®šçš„</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å­—ç¬¦ä¸²çš„ä¸€äº›ç›¸å…³æ“ä½œ</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// è¿½åŠ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let mut s1 = String::from(&quot;foo&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s2 = &quot;bar&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s1.push_str(s2); // è¿™é‡Œå¹¶ä¸ä¼šè½¬è®©æ‰€æœ‰æƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;s2 is {}&quot;, s2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let mut s = String::from(&quot;lo&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">s.push(&#x27;l&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆå¹¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åŠ å·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s1 = String::from(&quot;Hello, &quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s2 = String::from(&quot;world!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s3 = s1 + &amp;s2; // s1 çš„æ‰€æœ‰æƒè¢«ç§»äº¤å‡ºå»äº† + å·å…¶å®è°ƒç”¨çš„æ˜¯ add æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ ¼å¼åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s1 = String::from(&quot;tic&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s2 = String::from(&quot;tac&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s3 = String::from(&quot;toe&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s = format!(&quot;{}-{}-{}&quot;, s1, s2, s3);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä½†å¯ä»¥å¯¹å­—ç¬¦ä¸²åšèŒƒå›´åˆ‡ç‰‡ ä½†æ˜¯ä¼šå¯èƒ½æŠ¥é”™</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let hello = &quot;Ğ—Ğ´Ñ€Ğ°Ğ²ÑÑ‚Ğ²ÑƒĞ¹Ñ‚Ğµ&quot;; // è¿™é‡Œçš„ä¸€ä¸ªå­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s = &amp;hello[0..4];       // æ‰€ä»¥ 0åˆ°4 å–å‡ºæ¥çš„æ˜¯ &#x27;Ğ—Ğ´&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸€æ—¦å–äº† [0..1] æˆ–è€…æ˜¯ [0..3] å°±ä¼šå¯¼è‡´å­—ç¬¦æ— æ³•è¢«æ­£å¸¸åˆ‡å‡ºæ¥ ä¼šæŠ¥é”™</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>éå†å­—ç¬¦ä¸²çš„çœŸæ­£å­—ç¬¦ ä½¿ç”¨ <code>chars</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">for c in &quot;à¤¨à¤®à¤¸à¥à¤¤à¥‡&quot;.chars() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;{}&quot;, c);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æˆ–è€…éå†å­—ç¬¦ä¸²çš„å­—èŠ‚ç  ä½¿ç”¨ <code>bytes</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">for b in &quot;à¤¨à¤®à¤¸à¥à¤¤à¥‡&quot;.bytes() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;{}&quot;, b);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="hashmap">HashMap<a class="hash-link" href="#hashmap" title="Direct link to heading">â€‹</a></h4><ol><li><p>æ‰€æœ‰çš„é”®å€¼å¿…é¡»ä¸€è‡´, ä¹Ÿå°±æ˜¯é”®çš„ç±»å‹è¦ä¸€è‡´, å€¼çš„ç±»å‹ä¹Ÿè¦ä¸€è‡´</p></li><li><p>ä½¿ç”¨</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::collections::HashMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let mut scores = HashMap::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸€ä¸ªä¸€ä¸ªæ’å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.insert(String::from(&quot;Blue&quot;), 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.insert(String::from(&quot;Yellow&quot;), 50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å…ˆåˆ›å»ºæ‰€æœ‰çš„é”® å’Œ å€¼ å­˜æ”¾åˆ° vecå½“ä¸­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let teams  = vec![String::from(&quot;Blue&quot;), String::from(&quot;Yellow&quot;)];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let initial_scores = vec![10, 50];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// è¿™é‡Œçš„ ä¸‹åˆ’çº¿æ˜¯å¯ä»¥ç¼–è¯‘å™¨ è‡ªå·±å»çŒœæµ‹çš„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let scores: HashMap&lt;_, _&gt; = teams.iter().zip(initial_scores.iter()).collect();</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä¼šæ¥æ”¶æ‰€æœ‰æƒ</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let field_name = String::from(&quot;Favorite color&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let field_value = String::from(&quot;Blue&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let mut map = HashMap::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">map.insert(field_name, field_value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä¸‹é¢è¿™è¡Œä»£ç ä¼šæŠ¥é”™çš„ æ‰€æœ‰æƒå¤±æ•ˆäº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{}, {}&quot;, field_name, field_value);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>è·å–å€¼ <code>get</code> è¿”å›çš„æ˜¯ä¸ª <code>Option</code> å€¼ å› ä¸ºæ˜¯æœ‰å¯èƒ½ä¸º <code>None</code>çš„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">scores.insert(String::from(&quot;Blue&quot;), 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.insert(String::from(&quot;Yellow&quot;), 50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let team_name = String::from(&quot;Blue&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let score = scores.get(&amp;team_name);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// score =&gt; Some(10)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä»…å½“é”®æ²¡æœ‰å€¼æ—¶æ‰æ’å…¥å€¼ <code>entry</code> <code>or_insert</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let mut scores = HashMap::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.insert(String::from(&quot;Blue&quot;), 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.entry(String::from(&quot;Yellow&quot;)).or_insert(50);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scores.entry(String::from(&quot;Blue&quot;)).or_insert(50);   // è¿™é‡Œä¸ä¼šç”Ÿæ•ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{:?}&quot;, scores);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ›´æ–°å€¼ ä½†è¿™é‡Œæ„Ÿè§‰æœ‰ç‚¹é—®é¢˜</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let text = &quot;hello world wonderful world&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let mut map = HashMap::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for word in text.split_whitespace() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let count = map.entry(word).or_insert(0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    *count += 1; // åœ¨è¿™é‡Œæ›´æ–°äº† ä½†æ˜¯å°±æ€ä¹ˆé‚£ä¹ˆæ€ªå‘¢</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">println!(&quot;{:?}&quot;, map);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// å¦‚æœæŒ‰ç…§ä¸Šè¿°è¿™ä¸ªæ€è·¯çš„è¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let score = scores.entry(String::from(&quot;Blue&quot;)).or_insert(1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*score += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æŠ¥é”™-panic">æŠ¥é”™ <code>panic!</code><a class="hash-link" href="#æŠ¥é”™-panic" title="Direct link to heading">â€‹</a></h3><ol><li><p>å…³äº <code>panic!</code></p></li><li><p><code>Result</code></p><p>è¿™æ˜¯ä¸€ä¸ªæšä¸¾, è¡¨ç¤ºè¿™ä¸ªå€¼å¯ä»¥æ˜¯æœ‰ä¸¤ç§ç»“æœ, å¦‚æœæ˜¯<code>OK</code>ä¼šé™„å¸¦å¯¹åº”çš„<code>&lt;T&gt;</code>ç±»å‹, å¦‚æœæ˜¯<code>Err</code>çš„è¯, å°†ä¼šæ˜¯æŠ¥é”™</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">enum Result&lt;T, E&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(T),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Err(E),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = match f {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ok(file) =&gt; file,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Err(error) =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // è¿™é‡Œçš„ panic! è¡¨ç¤ºä¼šç›´æ¥åœæ­¢åœ¨è¿™é‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            panic!(&quot;Problem opening the file: {:?}&quot;, error)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç”šè‡³å¯ä»¥åŒ¹é…ä¸åŒçš„é”™è¯¯ ä¹Ÿå°±æ˜¯é’ˆå¯¹ err çš„é”™è¯¯ç±»å‹åšæ–‡ç« </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::ErrorKind;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = match f {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Ok(file) =&gt; file,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Err(error) =&gt; match error.kind() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ErrorKind::NotFound =&gt; match File::create(&quot;hello.txt&quot;) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Ok(fc) =&gt; fc,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Err(e) =&gt; panic!(&quot;Problem creating the file: {:?}&quot;, e),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            other_error =&gt; panic!(&quot;Problem opening the file: {:?}&quot;, other_error),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>é—­åŒ…</p><p>å¦‚æœåœ¨ä½¿ç”¨å¤šä¸ª<code>match</code>ä¼šä½¿å¾—ä»£ç çœ‹èµ·æ¥å¾ˆåŸå§‹</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::ErrorKind;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;).unwrap_or_else(|error| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if error.kind() == ErrorKind::NotFound {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            File::create(&quot;hello.txt&quot;).unwrap_or_else(|error| {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                panic!(&quot;Problem creating the file: {:?}&quot;, error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            panic!(&quot;Problem opening the file: {:?}&quot;, error);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ–°çš„å…³é”®å­—ç”¨æ¥å•ç‹¬è§£å†³æŠ¥é”™ <code>unwrap</code> å’Œ <code>expect</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;).unwrap();   // å¦‚æœæŠ¥é”™ ä¼šç›´æ¥ä¸­æ–­åœ¨è¿™é‡Œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;).expect(&quot;Failed to open hello.txt&quot;); // å¦‚æœæŠ¥é”™ ä¼šç›´æ¥æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ å¹¶ä¸”ä¸­æ–­</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä¼ é€’æŠ¥é”™</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use std::io::Read;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // é¦–å…ˆçœ‹è¿”å›å€¼ æ˜¯ä¸ª Result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let f = File::open(&quot;hello.txt&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ¤æ–­ f æ˜¯å¦æ˜¯é”™è¯¯ å¦‚æœæ˜¯çš„è¯ç›´æ¥è¿”å›æŠ¥é”™ å¦åˆ™ç›´æ¥èµ‹å€¼ä¸ºæ–‡ä»¶çš„ å¥æŸ„</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let mut f = match f {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ok(file) =&gt; file,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Err(e) =&gt; return Err(e),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let mut s = String::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åŒ¹é…æ–‡ä»¶è¯»å‡ºæ¥çš„å†…å®¹ç»™åˆ° æ–°å»ºçš„ s å½“ä¸­å»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        match f.read_to_string(&amp;mut s) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Ok(_) =&gt; Ok(s),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Err(e) =&gt; Err(e),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }   // è¿™é‡Œæ²¡æœ‰ ; è¡¨ç¤ºè¿™é‡Œå°±æ˜¯è¿”å›å€¼äº†</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ç”±äºä»¥ä¸Šä¼ é€’ éå¸¸å¸¸è§ å¯¼è‡´å¯ä»¥ ç”¨ <code>?</code> ä½¿å…¶ç²¾ç®€ </p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::Read;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut f = File::open(&quot;hello.txt&quot;)?;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut s = String::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.read_to_string(&amp;mut s)?;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¯¥<code>?</code>æ”¾åœ¨å<code>Result</code>å€¼å®šä¹‰ä¸ºå·¥ä½œåœ¨å‡ ä¹ç›¸åŒçš„æ–¹å¼<code>match</code>è¡¨è¾¾æˆ‘ä»¬å®šä¹‰æ¥å¤„ç†<code>Result</code>
ä¹Ÿå°±æ˜¯å¯ä»¥ç›´æ¥åšåˆ°ç®€åŒ–è¿”å›æ“ä½œçš„èƒ½åŠ›
ç”šè‡³æ›´åŠ çš„ç²¾ç®€</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::io::Read;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut s = String::new();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    File::open(&quot;hello.txt&quot;)?.read_to_string(&amp;mut s)?;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(s)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>å¥½å§ å…¶å®è¿˜å¯ä»¥è¶…çº§ç²¾ç®€</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::io;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn read_username_from_file() -&gt; Result&lt;String, io::Error&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æˆ‘è§‰å¾—è¿™é‡Œå·²ç»ç™«äº† ç›´æ¥å¸®ä½ å†™å¥½äº† æ‰“å¼€æ–‡ä»¶å¤¹å¹¶ä¸”è·å–å†…å®¹ å¹¶ä¸”è¿”å›å‡ºå»...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fs::read_to_string(&quot;hello.txt&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>é‚£ä¹ˆè¿™ä¸ª<code>?</code>èƒ½ç”¨åœ¨åˆ«çš„åœ°æ–¹å—? ä¸èƒ½çš„ åªèƒ½ç”¨åœ¨è¿”å›å€¼ä¸º <code>Result</code> çš„å‡½æ•°ä¸Š</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// é”™è¯¯ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;)?;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>è¿™é‡Œè¯´ä¸€å˜´ <code>main</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>()</code> æˆ‘å®Œå…¨ä¸çŸ¥é“è¿™æ˜¯ä¸ªä»€ä¹ˆç±»å‹...</p><p>ä½†ä½ å¯ä»¥è¿™ä¹ˆå†™</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::error::Error;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::fs::File;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() -&gt; Result&lt;(), Box&lt;dyn Error&gt;&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let f = File::open(&quot;hello.txt&quot;)?;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è¿”å›äº† () çš„åŒæ—¶ è€¶ å®Œæˆäº† ?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Ok(())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>ä½†è¿™é‡Œå‡ºç°äº†ä¸ªæ–°çš„ç©æ„ <code>Box&lt;dyn Error&gt;</code> <code>Box</code> çœ‹äº†æ–‡æ¡£ä¸æ˜¯å¾ˆæ‡‚ <code>pub struct Box&lt;T: ?Sized&gt;(Unique&lt;T&gt;);</code>
ä½† <code>dyn</code> è¡¨ç¤ºå¯ä»¥æ˜¯ä»»ä½•ç±»å‹
æ‰€ä»¥ <code>Box&lt;dyn Error&gt;</code> å¯ä»¥ç†è§£ä¸º ä»»ä½•ç±»å‹çš„é”™è¯¯</p></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ³›å‹-ç‰¹å¾-å’Œ-ç”Ÿå‘½å‘¨æœŸ">æ³›å‹ ç‰¹å¾ å’Œ ç”Ÿå‘½å‘¨æœŸ<a class="hash-link" href="#æ³›å‹-ç‰¹å¾-å’Œ-ç”Ÿå‘½å‘¨æœŸ" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ç‰¹å¾">ç‰¹å¾<a class="hash-link" href="#ç‰¹å¾" title="Direct link to heading">â€‹</a></h4><ol><li><p>å®šä¹‰å…±åŒæ¥å£</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Summary {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn summarize(&amp;self) -&gt; String;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct NewsArticle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub headline: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub location: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub author: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub content: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°æ¥å£ å¯¹äº NewsArticle è¿™ä¸ªç»“æ„ä½“æ¥è¯´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Summary for NewsArticle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn summarize(&amp;self) -&gt; String {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        format!(&quot;{}, by {} ({})&quot;, self.headline, self.author, self.location)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct Tweet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub username: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub content: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub reply: bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub retweet: bool,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å®ç°æ¥å£ å¯¹äº Tweet è¿™ä¸ªç»“æ„ä½“æ¥è¯´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Summary for Tweet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn summarize(&amp;self) -&gt; String {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        format!(&quot;{}: {}&quot;, self.username, self.content)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä¸èƒ½å®ç°å¤–éƒ¨ç‰¹å¾, åªèƒ½æœ¬åœ°ä½¿ç”¨</p></li><li><p>å¯ä»¥é»˜è®¤å®ç°ç‰¹å¾, è¿™æ ·æœ¬åœ°å°±éƒ½å¯ä»¥ä½¿ç”¨äº†</p></li><li><p>ç‰¹å¾å¯ä»¥ä½œä¸ºå‚æ•°, ä¹Ÿå°±æ˜¯å¿…é¡»å®ç°è¿™ä¸ªç‰¹å¾çš„ä»»æ„ç±»å‹</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// å•ç‹¬ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify(item: impl Summary) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Breaking news! {}&quot;, item.summarize());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æå–å‡ºæ¥ä½¿ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify&lt;T: Summary&gt;(item: T) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Breaking news! {}&quot;, item.summarize());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ­£å¸¸å•ç‹¬ä½¿ç”¨å¤šä¸ª</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify(item1: impl Summary, item2: impl Summary) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½†å¯ä»¥å†™æˆè¿™æ ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify&lt;T: Summary&gt;(item1: T, item2: T) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯ä»¥ç›¸åŠ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify(item: impl Summary + Display) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å½“ç„¶ä¹Ÿå¯ä»¥æå–å‡ºæ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pub fn notify&lt;T: Summary + Display&gt;(item: T) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½†å¦‚æœæœ‰å¤šä¸ªçš„æ—¶å€™ å°±ä¼šå¾ˆä¹±</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn some_function&lt;T: Display + Clone, U: Clone + Debug&gt;(t: T, u: U) -&gt; i32 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¯ä»¥ä½¿ç”¨ where æ¥åç»­è¡¥å……è¯´æ˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn some_function&lt;T, U&gt;(t: T, u: U) -&gt; i32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where T: Display + Clone,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        U: Clone + Debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>æ—¢ç„¶èƒ½åšå‚æ•°, é‚£ä¹ˆä¹Ÿèƒ½åšè¿”å›å€¼</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn returns_summarizable() -&gt; impl Summary {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Tweet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        username: String::from(&quot;horse_ebooks&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        content: String::from(&quot;of course, as you probably already know, people&quot;),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        reply: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        retweet: false,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½†æœ‰å±€é™æ€§ ä¹Ÿå°±æ˜¯è¯´ è¿™æ ·æ˜¯ä¸å…è®¸çš„ åªå…è®¸è¿”å›ä¸€ä¸ªç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn returns_summarizable(switch: bool) -&gt; impl Summary {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if switch {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        NewsArticle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Tweet {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>å®Œæˆä¹‹å‰çš„æ¯”å¤§å°</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// PartialOrd å¯ä»¥æ¯”è¾ƒ Copy å¯ä»¥è¿›è¡Œæ‹·è´ ä»£è¡¨å°±æ˜¯åœ¨å †ä¸Šçš„å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn largest&lt;T: PartialOrd + Copy&gt;(list: &amp;[T]) -&gt; T {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut largest = list[0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for &amp;item in list.iter() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if item &gt; largest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            largest = item;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    largest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="lifetime-å¯¿å‘½"><code>lifetime</code> å¯¿å‘½<a class="hash-link" href="#lifetime-å¯¿å‘½" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä¸‰æ¡è§„åˆ™</p><ol><li><p>ä½œä¸ºå¼•ç”¨çš„å‚æ•°éƒ½æœ‰å…¶è‡ªå·±çš„å¯¿å‘½ <code>fn foo&lt;&#x27;a, &#x27;b&gt;(x: &amp;&#x27;a i32, y: &amp;&#x27;b i32);</code></p></li><li><p>å¦‚æœå­˜åœ¨ä¸€ä¸ªæœ‰è¾“å…¥å¯¿å‘½çš„å‚æ•°çš„æ—¶å€™, é‚£ä¹ˆè¿”å›çš„ä¹Ÿå¾—æ˜¯è¿™ä¸ªå¸¦æœ‰å¯¿å‘½çš„å‚æ•°</p></li><li><p>å¦‚æœæœ‰å¤šä¸ªä¸åŒå¯¿å‘½å‚æ•°, ä½†å…¶ä¸­æœ‰çš„æ˜¯ <code>&amp;self</code> æˆ–è€…æ˜¯ <code>&amp;mut self</code>, é‚£ä¹ˆå°±æŠŠ <code>self</code> åˆ†é…ç»™æ‰€æœ‰è¾“å‡ºå¯¿å‘½å‚æ•°???</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ†æ 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn first_word(s: &amp;str) -&gt; &amp;str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç”±äºæ²¡æœ‰æŒ‡å®š é‚£ä¹ˆå°±ç®—æ˜¯ å…ˆæ‰§è¡Œç¬¬ä¸€æ¡è§„åˆ™ ç»™æ‰€æœ‰çš„å¼•ç”¨å‚æ•°æŒ‡å®šå¯¿å‘½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn first_word(s: &amp;&#x27;a str) -&gt; &amp;str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// åˆåªæœ‰ä¸€ä¸ªå¯¿å‘½ç±»å‹, é‚£ä¹ˆæŠŠè¾“å…¥çš„å¯¿å‘½ç»™åˆ°è¾“å‡º</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn first_word(s: &amp;&#x27;a str) -&gt; &amp;&#x27;a str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é‚£ä¹ˆç°åœ¨ï¼Œæ­¤å‡½æ•°æ‰€æœ‰å¼•ç”¨éƒ½å…·æœ‰å¯¿å‘½ï¼Œå¹¶ä¸”ç¼–è¯‘å™¨å¯ä»¥ç»§ç»­è¿›è¡Œåˆ†æï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸ç”¨ç¼–å†™è¿™ä¸ªå¯¿å‘½äº†</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// åˆ†æ 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn longest(x: &amp;str, y: &amp;str) -&gt; &amp;str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç”±äºæ²¡æœ‰æŒ‡å®š å…¥å‚çš„å¯¿å‘½ æ‰€ä»¥å…ˆæ‰§è¡Œç¬¬ä¸€æ¡è§„åˆ™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn longest(x: &amp;&#x27;a str, y: &amp;&#x27;b str) -&gt; &amp;str {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç¬¬äºŒæ¡è§„åˆ™é€‚ç”¨? ç”±äºæœ‰å¤šä¸ªä¸é€‚ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ç¬¬ä¸‰æ¡è§„åˆ™å‘¢? æ²¡æœ‰ self ä¹Ÿä¸é€‚ç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// æ‰€ä»¥è¿™ä¸ªç¼–è¯‘çš„æ—¶å€™ å°±ä¼šæŠ¥é”™</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="è‡ªåŠ¨åŒ–æµ‹è¯•">è‡ªåŠ¨åŒ–æµ‹è¯•<a class="hash-link" href="#è‡ªåŠ¨åŒ–æµ‹è¯•" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ„å»ºå‘½ä»¤è¡Œç¨‹åº">æ„å»ºå‘½ä»¤è¡Œç¨‹åº<a class="hash-link" href="#æ„å»ºå‘½ä»¤è¡Œç¨‹åº" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="é—­åŒ…å’Œè¿­ä»£å™¨">é—­åŒ…å’Œè¿­ä»£å™¨<a class="hash-link" href="#é—­åŒ…å’Œè¿­ä»£å™¨" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é—­åŒ…">é—­åŒ…<a class="hash-link" href="#é—­åŒ…" title="Direct link to heading">â€‹</a></h4><ol><li><p>å¯ä»¥ä¸æŒ‡å®šæ•°æ®ç±»å‹, ä½†ä½¿ç”¨çš„æ—¶å€™ ä¸èƒ½ä¹±ç”¨, ä»–ä¸æ˜¯æ³›å‹</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn  add_one_v1   (x: u32) -&gt; u32 { x + 1 }  // å‡½æ•° å®Œæ•´ç‰ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let add_one_v2 = |x: u32| -&gt; u32 { x + 1 }; // é—­åŒ… å®Œæ•´ç‰ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let add_one_v3 = |x|             { x + 1 }; // é—­åŒ… åˆ é™¤æŒ‡å®šæ•°æ®ç±»å‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let add_one_v4 = |x|               x + 1  ; // é—­åŒ… åˆ é™¤èŠ±æ‹¬å·</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><div class="codeBlockContainer_J+bg theme-code-block"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// ä½†åœ¨ä½¿ç”¨åä¸Š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let example_closure = |x| x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let s = example_closure(String::from(&quot;hello&quot;)); // ä½¿ç”¨äº†å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ å…¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let n = example_closure(5);                     // åˆä½¿ç”¨äº† æ•°å­—  è¿™é‡Œä¼šå´©</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">```</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol start="2"><li><p>é—­åŒ…ä¹Ÿæ˜¯æœ‰ç‰¹å¾çš„, è¿™æ ·çš„è¯å°±å¯ä»¥ä½œä¸ºæ³›å‹çš„å‚æ•°ä¼ å…¥äº† <code>Fn</code> <code>FnMut</code> <code>FnOnce</code></p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">struct Cacher&lt;T&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    where T: Fn(u32) -&gt; u32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    calculation: T,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: Option&lt;u32&gt;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>é—­åŒ…å¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„å˜é‡</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let x = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let equal_to_x = |z| z == x;    // ä½¿ç”¨äº† x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // fn equal_to_x(z: i32) -&gt; bool { z == x } //è¿™ä¸ªå°±ä¼šå´©</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let y = 4;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert!(equal_to_x(y));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>æ‰€ä»¥è¯´é—­åŒ…æ˜¯ä¼šå¼ºåˆ¶è·å–æ‰€æœ‰æƒçš„
<code>FnOnce</code>    è·å–å®Œå ä½†åªèƒ½è°ƒç”¨ä¸€æ¬¡
<code>FnMut</code>     å¯å˜çš„å½¢å¼è·å–äº†å€¼
<code>Fn</code>        ä¸å¯å˜çš„å½¢å¼è·å–äº†å€¼</p></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="è¿­ä»£å™¨">è¿­ä»£å™¨<a class="hash-link" href="#è¿­ä»£å™¨" title="Direct link to heading">â€‹</a></h4><ol><li><p>ç‰¹å¾ä¸º <code>Iterator</code> å’Œ å…·æœ‰ <code>next</code> æ–¹æ³•</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">pub trait Iterator {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type Item;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn next(&amp;mut self) -&gt; Option&lt;Self::Item&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p><code>next</code> æ˜¯ä¼šæ¶ˆè€—æ‰çš„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#[test]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn iterator_demonstration() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let v1 = vec![1, 2, 3];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut v1_iter = v1.iter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(v1_iter.next(), Some(&amp;1));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(v1_iter.next(), Some(&amp;2));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(v1_iter.next(), Some(&amp;3));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(v1_iter.next(), None);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn iterator_sum() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let v1 = vec![1, 2, 3];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let v1_iter = v1.iter();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let total: i32 = v1_iter.sum();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(total, 6);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>è¿­ä»£å™¨æ˜¯ä¸ä¼šè‡ªå·±è°ƒç”¨çš„</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">let v1: Vec&lt;i32&gt; = vec![1, 2, 3];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">v1.iter().map(|x| x + 1);   // è¿™ä¹ˆä½¿ç”¨æ—¶ä¼šæ”¶åˆ°è­¦å‘Š è¯´æ˜è¿™è¡Œä»£ç æ²¡æœ‰èµ·åˆ°ä»»ä½•ä½œç”¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">let v2: Vec&lt;_&gt; = v1.iter().map(|x| x + 1).collect();    // ç›´æ¥è¿›è¡Œè¿­ä»£</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">assert_eq!(v2, vec![2, 3, 4]);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li><li><p>ä½¿ç”¨åœºæ™¯</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">#![allow(unused_variables)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(PartialEq, Debug)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">struct Shoe {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    style: String,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn shoes_in_my_size(shoes: Vec&lt;Shoe&gt;, shoe_size: u32) -&gt; Vec&lt;Shoe&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shoes.into_iter()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .filter(|s| s.size == shoe_size)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        .collect()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#[test]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn filters_by_size() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let shoes = vec![</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Shoe { size: 10, style: String::from(&quot;sneaker&quot;) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Shoe { size: 13, style: String::from(&quot;sandal&quot;) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Shoe { size: 10, style: String::from(&quot;boot&quot;) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let in_my_size = shoes_in_my_size(shoes, 10);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    assert_eq!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        in_my_size,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        vec![</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shoe { size: 10, style: String::from(&quot;sneaker&quot;) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Shoe { size: 10, style: String::from(&quot;boot&quot;) },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="cratesio">Crates.io<a class="hash-link" href="#cratesio" title="Direct link to heading">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="æ™ºèƒ½æŒ‡é’ˆ">æ™ºèƒ½æŒ‡é’ˆ<a class="hash-link" href="#æ™ºèƒ½æŒ‡é’ˆ" title="Direct link to heading">â€‹</a></h3><ol><li><code>Rc&lt;T&gt;</code> å…è®¸å¯¹ä¸€ä¸ªå˜é‡æœ‰å¤šä¸ªæ‰€æœ‰è€…ï¼›<code>Box&lt;T&gt;</code> å’Œ <code>RefCell&lt;T&gt;</code> åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚</li><li><code>Box&lt;T&gt;</code> å…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥æ˜¯ä¸å¯å˜è¿˜æ˜¯å¯å˜çš„ï¼›<code>Rc&lt;T&gt;</code> åªå…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥ä¸å¯å˜çš„å¼•ç”¨ï¼›<code>RefCell&lt;T&gt;</code> å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥ä¸å¯å˜æˆ–å¯å˜çš„å¼•ç”¨ã€‚</li><li>ç”±äº<code>RefCell&lt;T&gt;</code>å…è®¸åœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯å˜å¼•ç”¨ï¼Œå› æ­¤ <code>RefCell&lt;T&gt;</code> å³ä½¿<code>RefCell&lt;T&gt;</code> æ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿå¯ä»¥åœ¨å†…éƒ¨æ”¹å˜å€¼ã€‚</li></ol><h3 class="anchor anchorWithStickyNavbar_y2LR" id="å¹¶å‘">å¹¶å‘<a class="hash-link" href="#å¹¶å‘" title="Direct link to heading">â€‹</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="çº¿ç¨‹">çº¿ç¨‹<a class="hash-link" href="#çº¿ç¨‹" title="Direct link to heading">â€‹</a></h4><ol><li><p>åˆ›å»ºçº¿ç¨‹ <code>thread::spawn</code></p></li><li><p>ç­‰å¾…è¯¥çº¿ç¨‹è·‘å®Œ <code>join</code> é˜»å¡çš„</p></li><li><p>çº¿ç¨‹å†…ä½¿ç”¨å¤–éƒ¨çš„å€¼ å…¶å®ä¹Ÿå¯ä»¥çœ‹åšæ˜¯ é—­åŒ…å†…ä½¿ç”¨å¤–éƒ¨å˜é‡ ä½†é—­åŒ…æ˜¯åœ¨å•ä¸€çº¿ç¨‹ä¸‹ä½¿ç”¨çš„ <code>move</code> æ˜¯é’ˆå¯¹çº¿ç¨‹é—­åŒ…çš„ æ‰€ä»¥ ä¼šå¼ºåˆ¶è·å–æ‰€æœ‰æƒ</p></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="é€šé“">é€šé“<a class="hash-link" href="#é€šé“" title="Direct link to heading">â€‹</a></h4><ol><li><p>ä¾‹å­</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::thread;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::sync::mpsc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let (tx, rx) = mpsc::channel();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    thread::spawn(move || {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let val = String::from(&quot;hi&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        tx.send(val).unwrap();  // ç§»äº¤æ‰€æœ‰æƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let received = rx.recv().unwrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Got: {}&quot;, received);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="ä¸Šé”">ä¸Šé”<a class="hash-link" href="#ä¸Šé”" title="Direct link to heading">â€‹</a></h4><ol><li><p>äº’æ–¥ å’Œ åŸå­å¼•ç”¨è®¡æ•°</p><div class="codeBlockContainer_J+bg language-rust theme-code-block"><div class="codeBlockContent_csEI rust"><pre tabindex="0" class="prism-code language-rust codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">use std::sync::{Mutex, Arc};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">use std::thread;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let counter = Arc::new(Mutex::new(0));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let mut handles = vec![];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for _ in 0..10 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let counter = Arc::clone(&amp;counter);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        let handle = thread::spawn(move || {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            let mut num = counter.lock().unwrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            *num += 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handles.push(handle);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for handle in handles {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handle.join().unwrap();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(&quot;Result: {}&quot;, *counter.lock().unwrap());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2020/server"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« <!-- -->éƒ¨ç½²æ–°å®‰è£…çš„centosæœåŠ¡å™¨</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2019/mac"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">macä¸Šå¯åŠ¨æ–‡ä»¶æœåŠ¡å™¨<!-- --> Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å®‰è£…" class="table-of-contents__link toc-highlight">å®‰è£…</a><ul><li><a href="#brew-å®‰è£…" class="table-of-contents__link toc-highlight">brew å®‰è£…</a></li><li><a href="#å®˜ç½‘æ–¹æ³•" class="table-of-contents__link toc-highlight">å®˜ç½‘æ–¹æ³•</a></li></ul></li><li><a href="#å…¥é—¨" class="table-of-contents__link toc-highlight">å…¥é—¨</a><ul><li><a href="#rustc-ç¼–è¯‘" class="table-of-contents__link toc-highlight">rustc ç¼–è¯‘</a></li><li><a href="#cargo" class="table-of-contents__link toc-highlight">Cargo</a></li><li><a href="#ç¼–å†™çŒœè°œæ¸¸æˆ" class="table-of-contents__link toc-highlight">ç¼–å†™çŒœè°œæ¸¸æˆ</a></li><li><a href="#é€šç”¨ç¼–ç¨‹æ¦‚å¿µ" class="table-of-contents__link toc-highlight">é€šç”¨ç¼–ç¨‹æ¦‚å¿µ</a></li><li><a href="#æ‰€æœ‰æƒ" class="table-of-contents__link toc-highlight">æ‰€æœ‰æƒ</a></li><li><a href="#å¼•ç”¨å’Œå€Ÿé˜…" class="table-of-contents__link toc-highlight">å¼•ç”¨å’Œå€Ÿé˜…</a></li><li><a href="#ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®" class="table-of-contents__link toc-highlight">ä½¿ç”¨ç»“æ„ä½“æ¥æ„é€ ç›¸å…³æ•°æ®</a></li><li><a href="#ä½¿ç”¨åŒ…å¤´æ–‡ä»¶" class="table-of-contents__link toc-highlight">ä½¿ç”¨åŒ…(å¤´æ–‡ä»¶)</a></li><li><a href="#å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿" class="table-of-contents__link toc-highlight">å¸¸ç”¨çš„ä¸€äº›é”®å€¼ä¿å­˜çš„ä¸œè¥¿</a></li><li><a href="#æŠ¥é”™-panic" class="table-of-contents__link toc-highlight">æŠ¥é”™ <code>panic!</code></a></li><li><a href="#æ³›å‹-ç‰¹å¾-å’Œ-ç”Ÿå‘½å‘¨æœŸ" class="table-of-contents__link toc-highlight">æ³›å‹ ç‰¹å¾ å’Œ ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#è‡ªåŠ¨åŒ–æµ‹è¯•" class="table-of-contents__link toc-highlight">è‡ªåŠ¨åŒ–æµ‹è¯•</a></li><li><a href="#æ„å»ºå‘½ä»¤è¡Œç¨‹åº" class="table-of-contents__link toc-highlight">æ„å»ºå‘½ä»¤è¡Œç¨‹åº</a></li><li><a href="#é—­åŒ…å’Œè¿­ä»£å™¨" class="table-of-contents__link toc-highlight">é—­åŒ…å’Œè¿­ä»£å™¨</a></li><li><a href="#cratesio" class="table-of-contents__link toc-highlight">Crates.io</a></li><li><a href="#æ™ºèƒ½æŒ‡é’ˆ" class="table-of-contents__link toc-highlight">æ™ºèƒ½æŒ‡é’ˆ</a></li><li><a href="#å¹¶å‘" class="table-of-contents__link toc-highlight">å¹¶å‘</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">ç‰ˆæƒ Â© 2021 danyow, Inc. ä½¿ç”¨ Docusaurus æ„å»ºã€‚</div></div></div></footer></div>
<script src="/assets/js/runtime~main.667cce3b.js"></script>
<script src="/assets/js/main.b2a8f5b1.js"></script>
</body>
</html>