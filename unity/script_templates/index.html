<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title=":D RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title=":D Atom Feed"><title data-react-helmet="true">如何在创建文件时自动生成命名空间 | :D</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://danyow.cn/unity/script_templates"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-unity-current"><meta data-react-helmet="true" property="og:title" content="如何在创建文件时自动生成命名空间 | :D"><meta data-react-helmet="true" name="description" content="在 Unity Editor 创建脚本或者相关文件时里面都会有一些预设的内容"><meta data-react-helmet="true" property="og:description" content="在 Unity Editor 创建脚本或者相关文件时里面都会有一些预设的内容"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://danyow.cn/unity/script_templates"><link data-react-helmet="true" rel="alternate" href="https://danyow.cn/unity/script_templates" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://danyow.cn/unity/script_templates" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1c4301b0.css">
<link rel="preload" href="/assets/js/runtime~main.4b91a339.js" as="script">
<link rel="preload" href="/assets/js/main.288829bd.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title">:D</b></a><a class="navbar__item navbar__link" href="/note/itinerary">笔记</a><a class="navbar__item navbar__link" href="/lua/lua">lua</a><a class="navbar__item navbar__link navbar__link--active" href="/unity/unity">unity</a><a class="navbar__item navbar__link" href="/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/danyow/danyow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/DOTween">DOTween</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/ESC">ESC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/GameObject">GameObject</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/UGUI">UGUI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/addressable">Addressable</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/animation">动画</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/assetBundle">AssetBundle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/camera">相机</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/editorGUI">EditorGUI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/frame">帧率优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/hack">游戏加密和破解</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/hotfix">热更新框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/line">流水线</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/memory">内存优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/mobile">手游平台优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/pathfinding">寻路算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/picture">图片压缩</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/pool">对象池框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/ray">射线</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/unity/script_templates">如何在创建文件时自动生成命名空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/transform">Transform</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/unity/unity">Unity</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/unity/hotfix/ILRuntime">hotfix</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/unity/resource/Interdependence">resource</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link hasHref_TwRn" href="/unity/shader/">shader</a><button aria-label="Toggle the collapsible sidebar category &#x27;shader&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>如何在创建文件时自动生成命名空间</h1></header><p>在 <strong>Unity Editor</strong> 创建脚本或者相关文件时里面都会有一些预设的内容</p><p>比方说 <code>MonoBehaviour</code></p><div class="codeBlockContainer_EiTO language-csharp theme-code-block"><div class="codeBlockContent_X2I6 csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class NewMonoBehaviour : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Start is called before the first frame update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update is called once per frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><p>但是唯独不会生成命名空间, 当然可以使用别的代码编辑器相关的工具去达成以上的目的, 但对于喜欢直接在 <em>Editor</em> 下创建文件的小伙伴来说就显得不那么友好了</p><h2 class="anchor anchorWithStickyNavbar_yP2J" id="直接修改安装目录下的模板">直接修改安装目录下的模板<a class="hash-link" href="#直接修改安装目录下的模板" title="直链到该处">​</a></h2><p>这是因为在 <em>Editor</em> 的安装目录 <code>％EDITOR_PATH％\Data\Resources\ScriptTemplates</code> 里面存在着一些模板</p><ul><li>Windows: <code>C:\Program Files\Unity\Editor\Data\Resources\ScriptTemplates</code></li><li>Mac: <code>/Applications/Unity/Editor/Data/Resources/ScriptTemplates</code></li><li>Linux: <code>/home/Unity/Editor/Data/Resources/ScriptTemplates</code></li></ul><div class="codeBlockContainer_EiTO language-csharp theme-code-block"><div class="codeBlockContent_X2I6 csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Collections.Generic;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    #ROOTNAMESPACEBEGIN#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class #SCRIPTNAME# : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Start is called before the first frame update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Start()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #NOTRIM#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update is called once per frame</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    void Update()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #NOTRIM#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#ROOTNAMESPACEEND#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><p>当然你可以直接修改这个模板, 但这只能你自己使用, 这并不 <strong>Unity</strong>, 所以采用第二种方案直接在各自工程目录下创建合适项目的模板</p><h2 class="anchor anchorWithStickyNavbar_yP2J" id="在工程里面自定义">在工程里面自定义<a class="hash-link" href="#在工程里面自定义" title="直链到该处">​</a></h2><p>首先在 <code>Assets</code> 目录下创建一个文件夹, 命名为 <code>ScriptTemplates</code> 和在 <code>ScriptTemplates</code> 这个目录下再建立一个 <code>Editor</code></p><div class="codeBlockContainer_EiTO language-tree theme-code-block"><div class="codeBlockContent_X2I6 tree"><pre tabindex="0" class="prism-code language-tree codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">Assets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── ScriptTemplates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── Editor</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><p>PS: 其中 <code>Editor</code> 用来后续添加 <strong>命名空间</strong></p><h2 class="anchor anchorWithStickyNavbar_yP2J" id="创建模板文件">创建模板文件<a class="hash-link" href="#创建模板文件" title="置顶该行">​</a></h2><p>然后依照既定的规则存放自己想要的模板文件</p><p><code>优先级-菜单路径-默认名称.文件扩展名.txt</code>
对比:
<code>81-C# Script-NewBehaviourScript.cs.txt</code>
<code>84-Shader__Unlit Shader-NewUnlitShader.shader.txt</code></p><ul><li>优先级: 越低越靠上</li><li>菜单路径:<ul><li>单文件路径: <code>C# Script</code></li><li>目录路径: <code>Shader__Unlit Shader</code>, <code>__</code> 双下划线等同于 <code>/</code><ul><li>你甚至可以 <code>Create Script__CSharp__Interface__WithoutNameSpace</code></li></ul></li></ul></li><li>默认名称: 理解为 <code>PlaceHolder</code> 占位符</li><li>文件扩展名: 正常就<code>.cs</code>就是对应的文件扩展名, 但如果定义为<code>.lua.txt</code> 这种, 其中的 <code>.lua</code> 就会被理解为文件的文件名去了</li></ul><p>像是这样</p><div class="codeBlockContainer_EiTO language-tree theme-code-block"><div class="codeBlockContent_X2I6 tree"><pre tabindex="0" class="prism-code language-tree codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">Assets</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── ScriptTemplates</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── 80-C# Interface-NewInterface.cs.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── 80-C# Serializable Class-NewScript.cs.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── 81-C# Script-NewBehaviourScript.cs.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── 99-Lua View Controller-NewViewController.lua.txt.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── Editor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── ScriptTemplateFixer.cs</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><h2 class="anchor anchorWithStickyNavbar_yP2J" id="添加模板内容">添加模板内容<a class="hash-link" href="#添加模板内容" title="置顶该行">​</a></h2><p>我们这里创建一个简单的可以自动生成命名空间的模板</p><div class="codeBlockContainer_EiTO language-csharp theme-code-block"><div class="codeBlockContent_X2I6 csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace #NAMESPACE#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class #SCRIPTNAME# : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        #NOTRIM#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><ul><li><p><code>#SCRIPTNAME#</code> : 为创建时, 重命名默认名称时输入的文件名</p><ul><li><code>#SCRIPTNAME_LOWER#</code> : 名称的第一个字母更改为小写</li></ul></li><li><p><code>#NOTRIM#</code> : 确保不删除空格，因此脚本始终包含方括号之间的那一行</p></li><li><p><code>#NAME#</code> : 它与 <code>#SCRIPTNAME#</code> 没有什么不同, 只不过适用于着色器模板</p></li></ul><blockquote><p>关于这些关键字的文档我没找到, 如有了解的大佬, 还望告知!</p></blockquote><h2 class="anchor anchorWithStickyNavbar_yP2J" id="重启-unity-激活模板文件">重启 <strong>Unity</strong> 激活模板文件<a class="hash-link" href="#重启-unity-激活模板文件" title="直链到该处">​</a></h2><p>在对应的目录下右键创建文件</p><div class="codeBlockContainer_EiTO language-csharp theme-code-block"><div class="codeBlockContent_X2I6 csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEngine;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">namespace #NAMESPACE#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public class NewBehaviourScript : MonoBehaviour</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><p>此时报错是因为 <code>#NAMESPACE#</code> 不在 <strong>Unity</strong> 的默认关键字当中, 需要我们自己手动处理.</p><h2 class="anchor anchorWithStickyNavbar_yP2J" id="自定义修复工具">自定义修复工具<a class="hash-link" href="#自定义修复工具" title="跳转到该处">​</a></h2><p>在之前的建立好 <em>Editor</em> 目录下创建 <code>ScriptTemplateFixer</code> 脚本. 继承自 <code>UnityEditor.AssetModificationProcessor</code> 并实现 <code>OnWillCreateAsset</code> 方法.</p><div class="codeBlockContainer_EiTO language-csharp theme-code-block"><div class="codeBlockContent_X2I6 csharp"><pre tabindex="0" class="prism-code language-csharp codeBlock_UxnK thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_W6UD"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Net.Mime;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.Linq;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using System.IO;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">using UnityEditor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ReSharper disable once CheckNamespace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ScriptTemplateFixer : UnityEditor.AssetModificationProcessor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void OnWillCreateAsset(string metaFilePath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取文件路径</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var filePath = metaFilePath.Replace(&quot;.meta&quot;, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取文件后缀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        switch (Path.GetExtension(filePath))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;.cs&quot;: AddNameSpace(filePath); break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            case &quot;.txt&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    var fileName = Path.GetFileNameWithoutExtension(filePath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // 如果是以 .lua.txt 结尾的话需要删除文件内的 .lua</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    if (Path.GetExtension(fileName) == &quot;.lua&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        RemoveDotLua(filePath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            default: break;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// 添加命名空间</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;filePath&quot;&gt;&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void AddNameSpace(string filePath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取目录路径 基于Assets/...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var path = Path.GetDirectoryName(filePath);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 获取所有的目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var names = path.Split(Path.DirectorySeparatorChar).ToList();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 倒序遍历删除不需要的文件目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (int index = names.Count - 1; index &gt;= 0; index--)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            var name = names[index];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (name == &quot;Assets&quot; || name == &quot;Scripts&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                names.RemoveAt(index);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                continue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 去掉文件可能的空格</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            names[index] = name.Replace(&quot; &quot;, &quot;&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (names.Count == 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 设置默认名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            names.Add(PlayerSettings.productName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 得到命名空间之后替换</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var nameSpace = string.Join(&#x27;.&#x27;, names);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var fileContents = File.ReadAllText(Path.Combine(Environment.CurrentDirectory, filePath));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File.WriteAllText(filePath, fileContents.Replace(&quot;#NAMESPACE#&quot;, nameSpace));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AssetDatabase.Refresh();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// 移除名称中 .lua 后缀</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;/summary&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// &lt;param name=&quot;filePath&quot;&gt;&lt;/param&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void RemoveDotLua(string filePath)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        var fileContents = File.ReadAllText(Path.Combine(Environment.CurrentDirectory, filePath));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        File.WriteAllText(filePath, fileContents.Replace(&quot;.lua&quot;, &quot;&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_V-PD clean-btn">复制</button></div></div><script src="https://gist.github.com/danyow/559cd832322780a7d94bd09a2a87419f.js"></script><p><a href="https://gist.github.com/danyow/559cd832322780a7d94bd09a2a87419f" target="_blank" rel="noopener noreferrer">最新更新位置</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/danyow/danyow/edit/main/unity/unity/script_templates.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑该页面</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-01-03T06:00:42.000Z">2022/1/3</time></b> by <b>Danyow</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/unity/ray"><div class="pagination-nav__sublabel">上卷</div><div class="pagination-nav__label">射线</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/unity/transform"><div class="pagination-nav__sublabel">下文</div><div class="pagination-nav__label">Transform</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#直接修改安装目录下的模板" class="table-of-contents__link toc-highlight">直接修改安装目录下的模板</a></li><li><a href="#在工程里面自定义" class="table-of-contents__link toc-highlight">在工程里面自定义</a></li><li><a href="#创建模板文件" class="table-of-contents__link toc-highlight">创建模板文件</a></li><li><a href="#添加模板内容" class="table-of-contents__link toc-highlight">添加模板内容</a></li><li><a href="#重启-unity-激活模板文件" class="table-of-contents__link toc-highlight">重启 <strong>Unity</strong> 激活模板文件</a></li><li><a href="#自定义修复工具" class="table-of-contents__link toc-highlight">自定义修复工具</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/img/logo.svg" alt="" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/logo.svg" alt="" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></div><div class="footer__copyright">© 2022 danyow, Inc. 使用 Docusaurus 构建。</div></div></div></footer></div>
<script src="/assets/js/runtime~main.4b91a339.js"></script>
<script src="/assets/js/main.288829bd.js"></script>
</body>
</html>